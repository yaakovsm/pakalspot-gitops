# Persistence & retention
prometheus:
  prometheusSpec:
    retention: 15d
    storageSpec:
      volumeClaimTemplate:
        spec:
          accessModes: ["ReadWriteOnce"]
          resources:
            requests:
              storage: 8Gi

# Grafana configuration
grafana:
  adminUser: admin
  adminPassword: admin
  service:
    type: ClusterIP
    port: 80
  persistence:
    enabled: true
    size: 2Gi
  defaultDashboardsTimezone: browser

  # Enable sidecar to load dashboards from ConfigMaps (managed by grafana-dashboards app)
  sidecar:
    dashboards:
      enabled: true
      label: grafana_dashboard
      folder: /tmp/dashboards

  # Add automatic Prometheus datasource
  additionalDataSources:
    - name: Prometheus
      type: prometheus
      access: proxy
      url: http://kube-prometheus-stack-prometheus.monitoring.svc.cluster.local

  # Optionally expose Grafana via Ingress (for AWS later)
  ingress:
    enabled: false
    annotations:
      kubernetes.io/ingress.class: traefik
    hosts:
      - grafana.local
    tls: []

# Disable node exporter for WSL environments
prometheus-node-exporter:
  enabled: false

# Enable Kube State Metrics
kube-state-metrics:
  enabled: true

# Alertmanager configuration
alertmanager:
  enabled: true
  alertmanagerSpec:
    replicas: 1
