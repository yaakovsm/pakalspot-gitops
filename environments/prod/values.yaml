# Production Environment Configuration
# Optimized for security, performance, and high availability
# Only environment-specific overrides - common settings are in common-settings.yaml
# Chart defaults are in pakalspot-chart/values.yaml

app:
  environment: production
  namespace: pakalspot-prod

global:
  image:
    tag: "v1.2.3"

frontend:
  replicaCount: 3
  image:
    tag: null
    pullPolicy: IfNotPresent
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 250m
      memory: 256Mi
  env:
    VITE_ALLOWED_HOSTS: "pakalspot.com"

backend:
  replicaCount: 3
  image:
    tag: null
    pullPolicy: IfNotPresent
  resources:
    limits:
      cpu: 1000m
      memory: 1Gi
    requests:
      cpu: 500m
      memory: 512Mi
  env:
    DEBUG: "false"
    ENVIRONMENT: "production"
    S3_BUCKET: "pakalspot-photos-prod"

database:
  statefulSet:
    replicaCount: 1
  resources:
    limits:
      cpu: 1000m
      memory: 2Gi
    requests:
      cpu: 500m
      memory: 1Gi
  persistence:
    enabled: true
    size: 50Gi
    storageClass: "fast-ssd"
    accessMode: ReadWriteOnce

secrets:
  database:
    POSTGRES_PASSWORD: "production_secure_password"

ingress:
  annotations:
    traefik.ingress.kubernetes.io/router.tls: "true"
  hosts:
    - host: pakalspot.com
      paths:
        - path: /api
          pathType: Prefix
          service: backend
        - path: /media
          pathType: Prefix
          service: backend
        - path: /
          pathType: Prefix
          service: frontend
  tls:
    enabled: true
    secretName: pakalspot-tls
    hosts:
      - pakalspot.com

securityContext:
  readOnlyRootFilesystem: true

autoscaling:
  enabled: true
  frontend:
    enabled: true
    minReplicas: 3
    maxReplicas: 10
    targetCPUUtilizationPercentage: 70
    targetMemoryUtilizationPercentage: 80
  backend:
    enabled: true
    minReplicas: 3
    maxReplicas: 10
    targetCPUUtilizationPercentage: 70
    targetMemoryUtilizationPercentage: 80

podDisruptionBudget:
  enabled: true
  frontend:
    enabled: true
    minAvailable: 2
  backend:
    enabled: true
    minAvailable: 2

networkPolicy:
  enabled: true

monitoring:
  enabled: true
  prometheus:
    enabled: true
  grafana:
    enabled: true

resourceQuota:
  enabled: true
  hard:
    requests.cpu: "10"
    requests.memory: "20Gi"
    limits.cpu: "20"
    limits.memory: "40Gi"
    persistentvolumeclaims: "10"
    services: "20"
    secrets: "50"
    configmaps: "50"
