# Staging Environment Configuration
# Production-like but with testing capabilities
# Only environment-specific overrides - common settings are in common-settings.yaml
# Chart defaults are in pakalspot-chart/values.yaml

app:
  environment: staging
  namespace: pakalspot-staging

global:
  image:
    tag: "dev-PLACEHOLDER"

frontend:
  replicaCount: 2
  image:
    tag: null
    pullPolicy: IfNotPresent
  resources:
    limits:
      cpu: 300m
      memory: 384Mi
    requests:
      cpu: 150m
      memory: 192Mi
  env:
    VITE_ALLOWED_HOSTS: "staging.pakalspot.com"

backend:
  replicaCount: 2
  image:
    tag: null
    pullPolicy: IfNotPresent
  resources:
    limits:
      cpu: 750m
      memory: 768Mi
    requests:
      cpu: 375m
      memory: 384Mi
  env:
    DEBUG: "false"
    ENVIRONMENT: "staging"
    S3_BUCKET: "pakalspot-photos-staging"

database:
  statefulSet:
    replicaCount: 1
  resources:
    limits:
      cpu: 750m
      memory: 1.5Gi
    requests:
      cpu: 375m
      memory: 768Mi
  persistence:
    enabled: true
    size: 20Gi
    accessMode: ReadWriteOnce

secrets:
  database:
    POSTGRES_PASSWORD: "staging_password_secure"

ingress:
  hosts:
    - host: staging.pakalspot.com
      paths:
        - path: /api
          pathType: Prefix
          service: backend
        - path: /media
          pathType: Prefix
          service: backend
        - path: /
          pathType: Prefix
          service: frontend
  tls:
    enabled: true
    secretName: pakalspot-staging-tls
    hosts:
      - staging.pakalspot.com

securityContext:
  readOnlyRootFilesystem: true

autoscaling:
  enabled: true
  frontend:
    enabled: true
    minReplicas: 2
    maxReplicas: 5
    targetCPUUtilizationPercentage: 75
    targetMemoryUtilizationPercentage: 80
  backend:
    enabled: true
    minReplicas: 2
    maxReplicas: 5
    targetCPUUtilizationPercentage: 75
    targetMemoryUtilizationPercentage: 80

podDisruptionBudget:
  enabled: true
  frontend:
    enabled: true
    minAvailable: 1
  backend:
    enabled: true
    minAvailable: 1

networkPolicy:
  enabled: true

monitoring:
  enabled: true
  prometheus:
    enabled: true
